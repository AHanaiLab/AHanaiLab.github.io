<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ã‚¹ãƒˆãƒ¬ãƒƒãƒã‚¿ã‚¤ãƒãƒ¼</title>
  <style>
    body {
      font-family: sans-serif;
      background: linear-gradient(135deg, #ffe4ec 0%, #e0f7fa 100%);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      text-align: center;
    }

    .circle-wrapper {
      position: relative;
      width: 220px;
      height: 220px;
      margin: 1rem 0;
    }

    #exercise-name {
      font-size: 1.6rem;
      color: #333;
      margin-top: 0rem;
      text-align: center;
      min-height: 2.2rem;
      /* â† æœ€ä½é™ã®é«˜ã•ã‚’ç¢ºä¿ */
      line-height: 1.2;
    }


    #setCounter {
      margin-top: 5px;
      font-size: 1.5rem;
      /* é€šå¸¸ãƒ†ã‚­ã‚¹ãƒˆã‚µã‚¤ã‚º */
      color: #575757;
      min-height: 4rem;
      /* é«˜ã•ã‚‚ç¢ºä¿ã—ã¦ä¸­å¤®å¯„ã› */
      display: flex;
      justify-content: center;
      /* ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’ä¸‹ã«ãã‚ãˆã‚‹ */
      align-items: flex-end;
      /* ç¸¦ä¸­å¤®å¯„ã› */
      text-align: center;
    }

    #setCounter .current {
      font-size: 4rem;
      /* æ•°å­—ã‚’å¤§ãã */
      font-weight: bold;
      line-height: 1;
      display: inline-block;
      margin-right: 0.2rem;
      /* / ã¨ã®é–“éš” */
    }

    #setCounter .divider-total {
      font-size: 2rem;
      margin-left: 0.2rem;
      display: inline-block;
      line-height: 1;
    }

    #setCounter .divider-total::before {
      content: "/";
      /* ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’è¿½åŠ  */
      position: relative;
      top: -0.15em;
      /* ä¸Šã«å¾®èª¿æ•´ */
      margin-right: 0.05em;
      /* æ•°å­—ã¨ã®é–“éš” */
    }

    .progress-ring {
      transform: rotate(-90deg);
      position: absolute;
      top: 0;
      left: 0;
    }

    .progress-ring__background {
      fill: none;
      stroke: #eee;
      stroke-width: 10;
    }

    .progress-ring__circle {
      fill: none;
      stroke: #bcddff;
      stroke-width: 10;
      stroke-linecap: round;
      transition: stroke-dashoffset 0.1s linear;
    }

    .circle-content {
      position: absolute;
      top: 0;
      left: 0;
      width: 220px;
      height: 220px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .timer {
      font-size: 4rem;
      color: #333;
      margin-top: 1rem;
      margin-bottom: 0rem;
      line-height: 1;
    }

    .divider {
      width: 150px;
      border: none;
      border-top: 1px solid #aaaaaa;
      margin: 0.5rem 0;
    }

    .total-timer {
      font-size: 2rem;
      color: #999;
      margin-top: 0rem;
      margin-bottom: 1rem;
      line-height: 1;
    }

    .exercise-name {
      font-size: 1.25rem;
      color: #666;
      margin-bottom: 0.5rem;
    }

    .controls {
      display: flex;
      gap: 1rem;
      margin: 1rem 0;
    }

    .controls button {
      width: 80px;
      /* ãƒœã‚¿ãƒ³ã®ç›´å¾„ */
      height: 80px;
      border-radius: 50%;
      /* å††å½¢ */
      border: none;
      font-size: 1.4rem;
      /* æ–‡å­—ã‚µã‚¤ã‚ºã‚‚å¤§ãã */
      cursor: pointer;
      box-shadow: 0 6px 10px rgba(0, 0, 0, 0.25);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 0;
    }

    .controls button:hover {
      background-color: #0056b3;
    }

    ul {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      /* 2åˆ— */
      gap: 0.5rem 1rem;
      /* è¡Œãƒ»åˆ—ã®é–“éš” */
      list-style: none;
      padding: 0;
      max-width: 90%;
      margin: 0 auto;
    }

    li {
      font-size: 1rem;
      padding: 0.4rem 0;
      border-bottom: none;
      /* æ ç·šã‚’æ¶ˆã™ or ä»»æ„ */
    }

    .active {
      font-weight: bold;
      color: green;
    }

    .completed {
      color: #aaa;
      text-decoration: line-through;
    }

    .controls {
      display: flex;
      justify-content: space-between;
      /* å·¦å³é…ç½®ã¯ç¶­æŒ */
      margin: 1.5rem auto 0;
      max-width: 400px;
      /* ğŸ‘ˆ æ¨ªå¹…ã‚’åˆ¶é™ã—ã¦ä¸­å¤®ã«å¯„ã›ã‚‹ */
      width: 100%;
      padding: 0 1rem;
      /* ä½™ç™½ã‚’è¶³ã™ï¼ˆå¥½ã¿ã§èª¿æ•´ï¼‰ */
    }


    /* å·¦å³ãã‚Œãã‚Œã«å›ºå®šã™ã‚‹ãŸã‚ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½œã‚‹ */
    .controls-left,
    .controls-right {
      flex: 0 0 auto;
      /* å¹…ã‚’å›ºå®š */
      min-width: 60px;
      /* ãƒœã‚¿ãƒ³ã®å¤§ãã•åˆ†ã‚’ç¢ºä¿ */
      display: flex;
      justify-content: flex-start;
      /* å·¦ã¯å·¦å¯„ã› */
    }

    .controls-right {
      justify-content: flex-end;
      /* å³ã¯å³å¯„ã› */
    }

    .controls button {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: none;
      color: #fff;
      font-size: 0.9rem;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      transition: background 0.2s;
    }

    /* ãƒœã‚¿ãƒ³ã”ã¨ã®è‰² */
    #start-btn {
      background-color: #4caf50;
    }

    #start-btn:hover {
      background-color: #45a049;
    }

    #pause-btn {
      background-color: #ff9800;
    }

    #pause-btn:hover {
      background-color: #f57c00;
    }

    #reset-btn {
      background-color: #f44336;
      margin-left: -10px;
      /* å·¦ã«10pxãšã‚‰ã™ */
    }

    #reset-btn:hover {
      background-color: #d32f2f;
    }
  </style>
</head>

<body>
  <h1>ã‚¹ãƒˆãƒ¬ãƒƒãƒã‚¿ã‚¤ãƒãƒ¼</h1>
  <div class="setCounter" id="setCounter">æº–å‚™ä¸­...</div>

  <div class="circle-wrapper">
    <svg class="progress-ring" width="220" height="220">
      <circle class="progress-ring__background" cx="110" cy="110" r="100" />
      <circle class="progress-ring__circle" cx="110" cy="110" r="100" />
    </svg>

    <div class="circle-content">
      <div class="timer" id="timer">--</div>
      <hr class="divider" />
      <div class="total-timer" id="total-timer">--:--</div>
    </div>
  </div>

  <div id="exercise-name"></div>

  <div class="controls">
    <div class="controls-left">
      <button id="start-btn" onclick="startTimer()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
      <button id="pause-btn" onclick="pauseTimer()" style="display:none;">ä¸€æ™‚åœæ­¢</button>
    </div>
    <div class="controls-right">
      <button id="reset-btn" onclick="resetTimer()">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
  </div>

  <ul id="exercise-list"></ul>

  <script>
    const sets = 8;
    const stretchTime = 20;
    const restTime = 10;

    let remain_stretch = sets;

    let wakeLock = null;
    async function requestWakeLock() {
      try {
        wakeLock = await navigator.wakeLock.request("screen");
      } catch (err) {
        console.error("WakeLock error:", err);
      }
    }
    async function releaseWakeLock() {
      if (wakeLock) {
        await wakeLock.release();
        wakeLock = null;
      }
    }

    let sequence = [];
    for (let i = 0; i < sets; i++) {
      sequence.push({ name: `ã‚¹ãƒˆãƒ¬ãƒƒãƒ ${i + 1}`, duration: stretchTime });
      if (i < sets - 1) {
        sequence.push({ name: "ä¼‘æ†©", duration: restTime });
      }
    }

    let current = 0;
    let remaining = sequence[0].duration;
    let paused = false;
    let elapsed = 0;
    let countdownInterval = null;
    let isCountdown = false;              // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ä¸­ã‹ã©ã†ã‹ã®ãƒ•ãƒ©ã‚°
    let countdown = 3;                    // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ç§’æ•°ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã™ã‚‹ï¼‰
    let countdownPaused = false;         // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ãŒä¸€æ™‚åœæ­¢ã•ã‚Œã¦ã„ã‚‹ã‹
    let countdownAudio = null;           // ç¾åœ¨ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³éŸ³å£°ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    let isStarted = false;                //æœ€å¾Œã®ãƒªãƒ­ãƒ¼ãƒ‰ã®å¾Œã«ã‚¹ã‚¿ãƒ¼ãƒˆã—ãŸã‹

    const setCounterEl = document.getElementById("setCounter");
    const timerEl = document.getElementById("timer");
    const listEl = document.getElementById("exercise-list");
    const exerciseNameEl = document.getElementById("exercise-name");
    const pauseBtn = document.getElementById("pause-btn");
    const totalTimerEl = document.getElementById("total-timer");
    const startBtn = document.getElementById("start-btn");
    const totalDuration = sequence.reduce((acc, cur) => acc + cur.duration, 0);


    // å††ã®åˆæœŸè¨­å®š
    const circle = document.querySelector(".progress-ring__circle");
    const radius = circle.r.baseVal.value;
    const circumference = 2 * Math.PI * radius;
    circle.style.strokeDasharray = `${circumference}`;
    circle.style.strokeDashoffset = `${circumference}`;

    function setProgress(percent) {
      const offset = circumference - (percent / 100) * circumference;
      circle.style.strokeDashoffset = offset;
    }

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "ja-JP";
      speechSynthesis.cancel();
      speechSynthesis.speak(utterance);
    }

    function playCountAudio(n) {
      const audioId = `${n}`;
      const audio = document.getElementById(audioId);

      if (audio) {
        // ã‚‚ã—å‰ã®éŸ³å£°ãŒå†ç”Ÿä¸­ãªã‚‰åœæ­¢
        if (countdownAudio && !countdownAudio.paused) {
          countdownAudio.pause();
          countdownAudio.currentTime = 0;
        }

        // ä»Šå›ã®éŸ³å£°ã‚’å†ç”Ÿ
        audio.volume = 1.0;
        audio.play().catch(e => console.warn(`ã‚«ã‚¦ãƒ³ãƒˆéŸ³å£°(${n})å†ç”Ÿå¤±æ•—:`, e));

        // å†ç”Ÿä¸­ã®éŸ³å£°ã¨ã—ã¦è¨˜éŒ²
        countdownAudio = audio;
      } else {
        console.warn(`Audioè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ${audioId}`);
      }
    }

    function vibrate() {
      if (navigator.vibrate) {
        navigator.vibrate([100, 50, 100]);
      }
    }

    // --- iOS/Androidå‘ã‘ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¢ãƒ³ãƒ­ãƒƒã‚¯ ---
    function unlockAudios() {
      if (!isStarted) {
        document.querySelectorAll("audio").forEach(audio => {
          audio.muted = true;
          audio.play().catch(() => { });
          audio.pause();
          audio.currentTime = 0;
          audio.muted = false;
        });
      }
    }


    // åŠ¹æœéŸ³ã‚’é³´ã‚‰ã™é–¢æ•°
    function playSound(id) {
      const sound = document.getElementById(id);
      if (sound) {
        sound.currentTime = 0;
        sound.volume = 1.0;
        sound.play().catch((e) => {
          console.warn("Audio play failed:", e);
        });
      }
    }

    //éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é †ã€…ã«æµã™
    function playSequence(ids, callback = null) {
      let index = 0;

      function next() {
        if (index < ids.length) {
          const sound = document.getElementById(ids[index]);
          index++;

          if (sound) {
            sound.currentTime = 0;
            sound.play()
              .then(() => {
                sound.onended = () => next();
              })
              .catch(e => {
                console.warn("å†ç”Ÿå¤±æ•—:", e);
                next(); // ã‚¨ãƒ©ãƒ¼ã§ã‚‚æ¬¡ã¸
              });
          } else {
            next(); // è¦ç´ ãŒãªã‘ã‚Œã°ã‚¹ã‚­ãƒƒãƒ—
          }
        } else if (callback) {
          callback();
        }
      }

      next(); // æœ€åˆã®å†ç”Ÿ
    }

    // è¤‡æ•°ã®å€™è£œã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«1ã¤ã‚’é¸ã‚“ã§å†ç”Ÿã™ã‚‹é–¢æ•°
    function playRandomSound(...ids) {
      if (!ids || ids.length === 0) return;

      const randomId = ids[Math.floor(Math.random() * ids.length)];
      playSound(randomId);  // æ—¢å­˜ã®é–¢æ•°ã‚’åˆ©ç”¨
    }


    let currentBGM = null;

    function playBGM() {
      currentBGM = document.getElementById("bgm");
      if (currentBGM) {
        currentBGM.currentTime = 0;
        //currentBGM.volume = 0.3;
        currentBGM.play().catch(e => console.warn("BGMå†ç”Ÿå¤±æ•—:", e));
      }
    }

    function pauseCurrentBGM() {
      if (currentBGM) currentBGM.pause();
    }

    function resumeCurrentBGM() {
      if (currentBGM) currentBGM.play().catch((e) => console.warn("BGMå†é–‹ã‚¨ãƒ©ãƒ¼:", e));
    }

    function stopCurrentBGM() {
      if (currentBGM) {
        currentBGM.pause();
        currentBGM.currentTime = 0;
      }
    }

    function stopAllAudios() {
      document.querySelectorAll("audio").forEach(audio => {
        audio.pause();
        audio.currentTime = 0;
      });
    }

    function updateExerciseName() {
      if (current >= sequence.length) {
        exerciseNameEl.textContent = "å®Œäº†";
      } else {
        const name = sequence[current].name;
        if (name.includes("ã‚¹ãƒˆãƒ¬ãƒƒãƒ")) {
          exerciseNameEl.textContent = "Stretch";
        } else if (name.includes("ä¼‘æ†©")) {
          exerciseNameEl.textContent = "Interval";
        } else {
          exerciseNameEl.textContent = name;
        }
      }
    }

    function updateDisplay() {
      const sec = String(remaining).padStart(2, '0');
      timerEl.textContent = `${sec}`;

      // ğŸ”½ å…¨ä½“ãŒçµ‚ã‚ã£ãŸã‚‰å®Œäº†è¡¨ç¤º
      if (current >= sequence.length) {
        setCounterEl.textContent = "å®Œäº†ï¼";
        setCounter.textContent = "";
        return;
      }

      // ğŸ”½ é€šå¸¸æ™‚ï¼ˆã‚¹ãƒˆãƒ¬ãƒƒãƒãƒ»ä¼‘æ†©å…±é€šï¼‰
      setCounterEl.textContent = sequence[current]?.name || "";
      const now = sets - remain_stretch + 1; // ç¾åœ¨ã®ã‚»ãƒƒãƒˆæ•°
      const total = sets;
      setCounter.innerHTML = `<span class="current">${now}</span> <span class="divider-total"> ${total}</span>`;

      updateExerciseName();
    }

    function updateList() {
      listEl.innerHTML = "";
      sequence.forEach((ex, i) => {
        const li = document.createElement("li");
        li.textContent = `${ex.name}ï¼ˆ${ex.duration}ç§’ï¼‰`;
        if (i < current) li.classList.add("completed");
        else if (i === current) li.classList.add("active");
        listEl.appendChild(li);
      });
    }

    function updateTotalTimer() {
      const remainingTotal = totalDuration - elapsed;
      const min = Math.floor(remainingTotal / 60);
      const sec = String(remainingTotal % 60).padStart(2, '0');
      totalTimerEl.textContent = `${min}:${sec}`;
    }

    // requestAnimationFrame ç”¨
    let animationId = null;
    let startTime = null;
    let previousSecond = null;

    let pausedElapsed = 0;  // ä¸€æ™‚åœæ­¢ã¾ã§ã®ç´¯ç©çµŒéæ™‚é–“
    function animateProgress(timestamp) {
      if (!startTime) startTime = timestamp;

      const currentDuration = sequence[current]?.duration || 1;
      const elapsedSeconds = (timestamp - startTime) / 1000 + pausedElapsed;
      const timeLeft = Math.max(currentDuration - elapsedSeconds, 0);
      remaining = Math.ceil(timeLeft);

      if (previousSecond !== remaining) {
        previousSecond = remaining;
        if (previousSecond !== null) elapsed++;
        updateDisplay();
        updateTotalTimer();
        if (remaining >= 1 && remaining <= 3) {
          playCountAudio(remaining);
          vibrate();
        }
      }

      const percent = (timeLeft / currentDuration) * 100;
      setProgress(percent);

      if (timeLeft > 0) {
        animationId = requestAnimationFrame(animateProgress);
      } else {
        // ã‚¿ã‚¤ãƒãƒ¼çµ‚äº†å‡¦ç†
        elapsed--;
        animationId = null;
        startTime = null;
        pausedElapsed = 0;
        previousSecond = null;
        nextStep();
      }
    }

    function nextStep() {
      current++;
      if (current < sequence.length) {
        remaining = sequence[current].duration;

        if (sequence[current]?.name.includes("ä¼‘æ†©")) {
          remain_stretch--;
          circle.style.stroke = "#dcd5ca";  // ç°è‰²ãŒã¡ã‚‡ã£ã¨æ¿ã£ãŸæ„Ÿã˜
          playSound("ä¼‘æ†©");
          //speak("ä¼‘æ†©");
        } else {
          circle.style.stroke = "#bcddff";  // ãƒ‘ã‚¹ãƒ†ãƒ«é’
          playSequence(["æ®‹ã‚Š", String(remain_stretch), "å›"]);
        }

        //speak(sequence[current].name);
        vibrate();
        updateList();
        updateTotalTimer();
        updateExerciseName();
        requestAnimationFrame(animateProgress);
      } else {
        pauseBtn.style.display = "none";
        setCounterEl.textContent = "ã™ã¹ã¦ã®ã‚¹ãƒˆãƒ¬ãƒƒãƒãŒå®Œäº†ã—ã¾ã—ãŸï¼";
        timerEl.textContent = "00";
        playSequence(["ã‚´ãƒ¼ãƒ«",
          ["é ‘å¼µã£ãŸã­", "ã‚ˆãã§ãã¾ã—ãŸ", "ãƒãƒ¼ãƒ™ãƒ©ã‚¹", "ã‚¨ã‚¯ã‚»ãƒ¬ãƒ³ãƒˆ"][Math.floor(Math.random() * 4)]]);//ãƒ©ãƒ³ãƒ€ãƒ å†ç”Ÿ
        vibrate();
        setProgress(0);
        stopCurrentBGM();
      }
    }

    function startTimer() {
      if (animationId || current >= sequence.length) return;
      unlockAudios();
      isStarted = true;

      startBtn.style.display = "none";
      pauseBtn.style.display = "none";
      stopAllAudios();

      startCountdown();

      // ã€Œå§‹ã‚ã¾ã™ã€ã‚’0.5ç§’é…ã‚‰ã›ã¦å†ç”Ÿ
      setTimeout(() => {
        playSound("å§‹ã‚ã¾ã™");
      }, 500);
    }

    function startCountdown() {
      isCountdown = true;
      exerciseNameEl.textContent = "";
      countdown = 5;
      timerEl.textContent = countdown;
      setCounterEl.textContent = "ã¾ã‚‚ãªãé–‹å§‹...";

      // ğŸ”½ ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³éŸ³å£°ã‚’é–‹å§‹
      if (countdownAudio) {
        countdownAudio.currentTime = 0;
        countdownAudio.play().catch((e) => console.warn("ã‚«ã‚¦ãƒ³ãƒˆéŸ³å£°å†ç”Ÿå¤±æ•—:", e));
      }

      countdownInterval = setInterval(() => {
        if (countdownPaused) return;

        if (countdown > 0) {
          timerEl.textContent = countdown;

          // ç§’ã”ã¨ã«å¯¾å¿œã™ã‚‹éŸ³å£°ã‚’å†ç”Ÿ
          if (countdown <= 3) {
            const audio = document.getElementById(`${countdown}`);
            if (audio) {
              audio.pause();
              audio.currentTime = 0;
              audio.play().catch(e => console.warn("ã‚«ã‚¦ãƒ³ãƒˆéŸ³å£°å†ç”Ÿå¤±æ•—:", e));
            }
          }
          countdown--;
        } else {
          clearInterval(countdownInterval);
          countdownInterval = null;
          isCountdown = false;

          playSound("ã‚¹ã‚¿ãƒ¼ãƒˆ");
          requestWakeLock();
          vibrate();
          updateList();
          updateDisplay();
          updateTotalTimer();
          requestAnimationFrame(animateProgress);
          playBGM();
          elapsed--;

          pauseBtn.style.display = "inline-block";
          pauseBtn.textContent = "ä¸€æ™‚åœæ­¢";
        }
      }, 1000);
    }

    function pauseTimer() {
      paused = !paused;
      pauseBtn.textContent = paused ? "å†é–‹" : "ä¸€æ™‚åœæ­¢";

      if (paused) {
        if (isCountdown) {
          // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ä¸­ãªã‚‰ interval ã‚’æ­¢ã‚ã‚‹
          countdownPaused = true;
          if (countdownAudio) countdownAudio.pause();
        } else {
          pausedElapsed += (performance.now() - startTime) / 1000;
          startTime = null;
          cancelAnimationFrame(animationId);
          animationId = null;
          pauseCurrentBGM();
        }
      } else {
        if (isCountdown) {
          // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³å†é–‹
          countdownPaused = false;
          if (countdownAudio) countdownAudio.play().catch(e => console.warn("å†é–‹ã‚¨ãƒ©ãƒ¼", e));
        } else {
          startTime = performance.now();
          requestAnimationFrame(animateProgress);
          resumeCurrentBGM();
        }
      }
    }

    function resetTimer() {
      if (countdownInterval) {
        clearInterval(countdownInterval);
        countdownInterval = null;
      }
      cancelAnimationFrame(animationId);
      animationId = null;
      startTime = null;
      current = 0;
      remaining = sequence[0].duration;
      elapsed = 0;
      paused = false;
      pausedElapsed = 0;
      previousSecond = null;
      remain_stretch = sets;
      exerciseNameEl.textContent = "";

      // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹
      startBtn.style.display = "inline-block";
      pauseBtn.style.display = "none";
      pauseBtn.textContent = "ä¸€æ™‚åœæ­¢";

      updateList();
      updateDisplay();
      exerciseNameEl.textContent = ""; // â† ã“ã®è¡Œã‚’è¿½åŠ 
      updateTotalTimer();
      setProgress(100);
      circle.style.stroke = "#bcddff";  // ãƒ‘ã‚¹ãƒ†ãƒ«é’
      releaseWakeLock();
      stopCurrentBGM();
    }

    // åˆæœŸåŒ–
    updateList();
    updateDisplay();
    updateTotalTimer();
    setProgress(100);
    pausedElapsed = 0;
    pauseBtn.style.display = "none";
    exerciseNameEl.textContent = "";

  </script>

  <audio id="ã‚¹ã‚¿ãƒ¼ãƒˆ" src="ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€.mp3" preload="auto"></audio>
  <audio id="æ®‹ã‚Š" src="ã€Œæ®‹ã‚Šã€.mp3" preload="auto"></audio>
  <audio id="å›" src="ã€Œå›ã€.mp3" preload="auto"></audio>
  <audio id="å§‹ã‚ã¾ã™" src="ã€Œå§‹ã‚ã¾ã™ã€.mp3" preload="auto"></audio>
  <audio id="ã‚´ãƒ¼ãƒ«" src="ã€Œã‚´ãƒ¼ãƒ¼ãƒ¼ãƒ«ï¼ã€.mp3" preload="auto"></audio>
  <audio id="é ‘å¼µã£ãŸã­" src="ã€Œé ‘å¼µã£ãŸã­ã€ .mp3" preload="auto"></audio>
  <audio id="ã‚ˆãã§ãã¾ã—ãŸ" src="ã€Œã‚ˆãã§ãã¾ã—ãŸã€.mp3" preload="auto"></audio>
  <audio id="ãƒãƒ¼ãƒ™ãƒ©ã‚¹" src="ã€Œãƒãƒ¼ãƒ™ãƒ©ã‚¹ã€.mp3" preload="auto"></audio>
  <audio id="ã‚¨ã‚¯ã‚»ãƒ¬ãƒ³ãƒˆ" src="ã€Œã‚¨ã‚¯ã‚»ãƒ¬ãƒ³ãƒˆã€.mp3" preload="auto"></audio>
  <audio id="8" src="ã€Œ8ã€.mp3" preload="auto"></audio>
  <audio id="7" src="ã€Œ7ã€.mp3" preload="auto"></audio>
  <audio id="6" src="ã€Œ6ã€.mp3" preload="auto"></audio>
  <audio id="5" src="ã€Œ5ã€.mp3" preload="auto"></audio>
  <audio id="4" src="ã€Œ4ï¼ˆã‚ˆã‚“ï¼‰ã€.mp3" preload="auto"></audio>
  <audio id="3" src="ã€Œ3ã€.mp3" preload="auto"></audio>
  <audio id="2" src="ã€Œ2ã€.mp3" preload="auto"></audio>
  <audio id="1" src="ã€Œ1ã€.mp3" preload="auto"></audio>
  <audio id="ä¼‘æ†©" src="rest.mp3" preload="auto"></audio>
  <audio id="bgm" src="MOCHIKOã‚¹ãƒˆãƒ¬ãƒƒãƒ.wav" preload="auto" loop></audio>
</body>

</html>